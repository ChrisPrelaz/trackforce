<!-- @Author Princewill Ibe -->
<div class="container table-width-adjust">
  <div>
    <title class="text-center text-primary">Batch List</title>
  </div>
  <div class="row">
    <div class="col-lg-5 col-md-12 mcolumn left">
      <h3>All Batches</h3>
      <table class="table table-striped table-hover table-bordered">
        <thead>
          <tr class="max-width">
            <th class="name-column">Batch Name</th>
            <th class="date-column">Start Date</th>
            <th class="date-column">End Date</th>
          </tr>
        </thead>
        <tbody>
        <ng-container *ngIf="dataReady">
          <tr *ngFor="let batch of batches" class="max-width">
            <td class="name-column"><a routerLink="/batch-details/{{batch.id}}">{{batch.batchName}}</a></td>
            <td class="date-column">{{batch.startDate | date:'MM/dd/yyyy'}}</td>
            <td class="date-column">{{batch.endDate| date:'MM/dd/yyyy'}}</td>
          </tr>
        </ng-container>
        </tbody>
      </table>
    </div>

    <div class="col-lg-7 col-md-12 mcolumn right">
      <h3>Select Dates</h3>
      <form>
        <div>
          <label for="startDate">From:</label>
          <!-- You have to use ngModel AND ngModelChange for proper initialization!! -->
          <input type="date" [ngModel]="startDate | date:'yyyy-MM-dd'" (ngModelChange)="start = $event" id="startDate" name="startDate" [max]="endDate"/>
        </div>
        <div>
          <label for="endDate">To:</label>
          <input type="date" [ngModel]="endDate | date:'yyyy-MM-dd'" (ngModelChange)="end = $event" id="endDate" name="endDate" [min]="startDate"/>
        </div>
        <div>
          <input type="submit" class="btn btn-default" value="Submit" (click)="applySelectedRange(start, end)"/>
          <input type="submit" class="btn btn-danger" value="Reset" (click)="resetToDefaultBatches()"/>
        </div>
      </form>
      <ng-container *ngIf="dataReady && !dataEmpty">
        <canvas baseChart
                id="pie" class="chart chart-pie"
                [data]="curriculumCounts"
                [labels]="curriculumNames"
                [chartType]="pieChartType"
                [colors]="batchColors"
                [options]="chartOptions">
        </canvas>
      </ng-container>
      <h3 class="data-status" *ngIf="dataReady && dataEmpty">
        No Batch Found
      </h3>
      <h3 class="data-status" *ngIf="!dataReady">
        <!-- Batch List begins -->
        <div class="row" style="position:relative;">
          <div class="table-responsive pre-scrollable" id="info" style="overflow-x:none!important;">
            <table class="table table-striped table-hover table-bordered" border-width=2px>
              <thead class="pointer">
                <tr>
                    <th class="id" (click)="sort('id')">Batch ID</th>
                    <th class="curriculum" (click)="sort('curriculum')">Curriculum</th>
                    <th class="location" (click)="sort('location')">Location</th>
                    <th class="startDate" (click)="sort('startDate')">Start Date</th>
                    <th class="endDate" (click)="sort('endDate')">End Date</th>
                    <th class="associates" (click)="sort('associates')">Associates</th>
                    <th class="trainers" (click)="sort('trainers')">Trainers</th>
                    <th class="coTrainers" (click)="sort('coTrainers')">Co-Trainers</th>
                </tr>
              </thead>
            </table>
      </h3>
    </div>

  </div>
</div>
